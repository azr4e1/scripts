#!/bin/sh

function rename {
    ## what workspace are active?
    #active_workspaces=$( swaymsg -t get_workspaces | jq '.[] | .name' | tr -d '"')
    ## put each workspace on a single line
    #for i in $active_workspaces; do workspaces+=$i"\n"; done
    # possible names
    names="1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n\" \"\n\"1: \"\n\"2: \"\n\"3: \"\n\"4: \"\n\"5: \"\n\"6: \"\n\"7: \"\n\"8: \"\n\"9: \"\n\"10: \"\n\" \"\n\"1: \"\n\"2: \"\n\"3: \"\n\"4: \"\n\"5: \"\n\"6: \"\n\"7: \"\n\"8: \"\n\"9: \"\n\"10: \"\n\" \"\n\"1: \"\n\"2: \"\n\"3: \"\n\"4: \"\n\"5: \"\n\"6: \"\n\"7: \"\n\"8: \"\n\"9: \"\n\"10: \"\n\" \"\n\"1: \"\n\"2: \"\n\"3: \"\n\"4: \"\n\"5: \"\n\"6: \"\n\"7: \"\n\"8: \"\n\"9: \"\n\"10: \"\n\" \"\n\"1: \"\n\"2: \"\n\"3: \"\n\"4: \"\n\"5: \"\n\"6: \"\n\"7: \"\n\"8: \"\n\"9: \"\n\"10: \"\n\" \"\n\"1: \"\n\"2: \"\n\"3: \"\n\"4: \"\n\"5: \"\n\"6: \"\n\"7: \"\n\"8: \"\n\"9: \"\n\"10: \"\n\" \"\n\"1: \"\n\"2: \"\n\"3: \"\n\"4: \"\n\"5: \"\n\"6: \"\n\"7: \"\n\"8: \"\n\"9: \"\n\"10: \"\n\" \"\n\"1: \"\n\"2: \"\n\"3: \"\n\"4: \"\n\"5: \"\n\"6: \"\n\"7: \"\n\"8: \"\n\"9: \"\n\"10: \"\n\" \"\n\"1: \"\n\"2: \"\n\"3: \"\n\"4: \"\n\"5: \"\n\"6: \"\n\"7: \"\n\"8: \"\n\"9: \"\n\"10: \"\n\" \"\n\"1: \"\n\"2: \"\n\"3: \"\n\"4: \"\n\"5: \"\n\"6: \"\n\"7: \"\n\"8: \"\n\"9: \"\n\"10: \"\n\" \"\n\"1: \"\n\"2: \"\n\"3: \"\n\"4: \"\n\"5: \"\n\"6: \"\n\"7: \"\n\"8: \"\n\"9: \"\n\"10: \"\n\" \"\n\"1: \"\n\"2: \"\n\"3: \"\n\"4: \"\n\"5: \"\n\"6: \"\n\"7: \"\n\"8: \"\n\"9: \"\n\"10: \"\n\" \"\n\"1: \"\n\"2: \"\n\"3: \"\n\"4: \"\n\"5: \"\n\"6: \"\n\"7: \"\n\"8: \"\n\"9: \"\n\"10: \"\n\" \"\n\"1: \"\n\"2: \"\n\"3: \"\n\"4: \"\n\"5: \"\n\"6: \"\n\"7: \"\n\"8: \"\n\"9: \"\n\"10: \"\n\" \"\n\"1: \"\n\"2: \"\n\"3: \"\n\"4: \"\n\"5: \"\n\"6: \"\n\"7: \"\n\"8: \"\n\"9: \"\n\"10: \"\n\" \"\n\"1: \"\n\"2: \"\n\"3: \"\n\"4: \"\n\"5: \"\n\"6: \"\n\"7: \"\n\"8: \"\n\"9: \"\n\"10: \"\n\" \"\n\"1: \"\n\"2: \"\n\"3: \"\n\"4: \"\n\"5: \"\n\"6: \"\n\"7: \"\n\"8: \"\n\"9: \"\n\"10: \"\n\" \"\n\"1: \"\n\"2: \"\n\"3: \"\n\"4: \"\n\"5: \"\n\"6: \"\n\"7: \"\n\"8: \"\n\"9: \"\n\"10: \"\n\" \"\n\"1: \"\n\"2: \"\n\"3: \"\n\"4: \"\n\"5: \"\n\"6: \"\n\"7: \"\n\"8: \"\n\"9: \"\n\"10: \"\n\" \"\n\"1: \"\n\"2: \"\n\"3: \"\n\"4: \"\n\"5: \"\n\"6: \"\n\"7: \"\n\"8: \"\n\"9: \"\n\"10: \""
    # choose workspace to rename
    # NB here I am invoking dmenu, but it is actually
    # wofi symlinked so that it runs cacheless
    #workspace=$( echo -e ${workspaces:: -2} | wofi -d -p "Which workspace to rename?" )

    #[ -z "$workspace" ] && exit 1

    # choose new name
    name=$( echo -e $names | $HOME/.local/bin/dmenu --conf=$HOME/.config/wofi/config_alt -p "Rename with:" )

    [ -z "$name" ] && exit 1

    # rename
    #swaymsg "rename workspace $workspace to $name"
    swaymsg "rename workspace to $name"
}

rename
